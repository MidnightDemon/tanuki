<%=stylesheet_link_tag :calendar%> 

<div class="board">
  <div class="bubble" style="width: 640px; float: left;">
    <h1>Calendar</h1>

    <h4>Today is <%= Time.now.strftime("%A, %B %d %Y") %></h4>

    <div class="calendar">
      <table cellpadding="0" cellspacing="1">
        <tbody>
        <% 7.times do |row|%>
          <% if row == 0 %>
            <tr class="header">
          <% else %>
            <tr>
          <% end %>  
      	  
          <% 7.times do |col|%>
            <% if row == 0 %>
              <td class="header">
                <div><%= Date::DAYNAMES[col] %></div>
      		    </td>
            <% else %>
              <td>
                <div id="<%= row-1 %>-<%= col %>" class="
      		        <% if (col == @startDate.wday || row-1 > 0 || (col > @startDate.wday && row-1 == 0)) && ( (7-@startDate.wday) + (row-2)*7 + col < @startDate.end_of_month.day)%>
      		      
                    <%= "wday clickable" %>

                    <% if (@currDate == Time.now.day) %>
                      <%= " today" %>
                    <% end %>

                    ">
        		        <%= @currDate %>
        		        <% @currDate += 1 %>
                  <% else %>
                    ">
                  <% end %>  
      		      </div>
      		    </td>
            <% end %>
          <% end %>
          
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="todo bubble" style="width: 196px; height: 424px; max-height: 424px; margin-top: 0px; position: relative; top: 10px;">
    <h1>Tasks</h1>
    <b>Completed</b>

    <div class="indent-small">
      <% @tasks_done.each do |task| %>
        <tr>
          <td>
            <% if task.icon != nil %>
              <%= image_tag task.icon %>
            <% end %>
          </td>
          <td><%= content_tag(:p, task.description, :style => "display: inline;") %></td>
          <td><%= image_tag "icons/x.png" %></td>
        </tr>
      <% end %>
      <% if !@tasks_done.any? %>
        <%= "Nothing done yet..." %>
      <% end %>
    </div>

    <br />

    <b>Pending</b>
    <div class="indent-small">
      <% @tasks_pending.each do |task| %>
        <tr>
          <td>
            <% if task.icon != nil %>
              <%= image_tag task.icon %>
            <% end %>
          </td>
          <td><%= content_tag(:p, task.description, :style => "display: inline;") %></td>
          <td><%= link_to (image_tag "icons/check.png") %></td>
          <td><%= link_to (image_tag "icons/x.png") %></td>
        </tr>
      <% end %>
    </div>    

    <%= link_to 'New Task', new_task_path, :id => "new", :class => "button" %>
  </div>
</div>

<div class="bubble">
  <h2>Newest Food Entries</h2>
  <table class="records">
    <tr>
      <th class="header">Date</th>
      <th class="header">Time slot</th>
      <th class="header" style="width:600px;">Content</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>

    <% @entries.each do |entry| %>
      <tr>
        <td><%= entry.date.to_date() %></td>
        <td><%= entry.food_time.name %></td>
        <td><%= entry.content %></td>
        <td><%= link_to 'Show', entry, :class => "button" %></td>
        <td><%= link_to 'Edit', edit_calendar_entry_path(entry), :class => "button" %></td>
        <td><%= link_to 'Destroy', entry, confirm: 'Are you sure?', method: :delete, :class => "button" %></td>
      </tr>
    <% end %>
  </table>
  <br />
  <%= link_to 'New Entry', new_calendar_entry_path, :class => "button" %>
</div>

<div class="bubble">
  <h2>Newest Posts</h2>
  <table class="records">
    <tr>
      <th class="header">Name</th>
      <th class="header">Title</th>
      <th class="header">Content</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>

  <% @posts.each do |post| %>
    <tr>
      <td><%= post.name %></td>
      <td><%= post.title %></td>
      <td><%= post.content %></td>
      <td><%= link_to 'Show', post, :class => "button" %></td>
      <td><%= link_to 'Edit', edit_post_path(post), :class => "button" %></td>
      <td><%= link_to 'Destroy', post, confirm: 'Are you sure?', method: :delete, :class => "button" %></td>
    </tr>
  <% end %>
    
  </table>

  <br />

  <%= link_to 'New Post', new_post_path, :class => "button" %>
</div>
